<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/zenburn.min.css">
  </head>
  <body>

    <div class="col-md-10 col-md-offset-1">
      <h3>Configuração</h3>

      <div class="form-group col-md-7">
        <label for="public-key">Chave pública</label>
        <textarea id="public-key" placeholder="" class="form-control" rows="10">-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAtGFVOXbEmXRYcoe3dNPQ
tI8mAokTQ6rmyrByw3i1hUYzzcgBGTAItQFHstGrZLLrlJc4utZE0/wZz6RaVOuI
nBg+2HO5XAUkmJTLVLZEbGgBEMDqrYuv0XX9ALgvWnQdPWZP+6H6ZHuqE5n4dyeL
Y2jlL4arF0ru+Ideduj2FpZk1YbCFD80z50rSGO9h66Ev3AqCljhBhSExpn5T0fH
PBamwLAQr0y2VbtOmRPQW9iMGD1vs8wZSr7NMBOp4w4ytMdoo+NPsFfIs20Nli7v
vEgMVGq9l5UiOiSCdLO1LToSZpDNbOMgkDjJSdFGHlDJIsg5UZasHFxryqdO9G6w
nQIDAQAB
-----END PUBLIC KEY-----</textarea>
      </div>

      <div class="form-group col-md-4">
        <label for="order-id">Order a ser cobrado</label>
        <input id="order-id" type="text" placeholder="" class="form-control" value="ORD-1GVWGIR2A6VW"/>
      </div>
    </div>

    <form class="form-horizontal" id="test-form" action="#">
      <fieldset class="col-md-10 col-md-offset-1">

        <!-- Form Name -->
        <legend>Confirmar Pagamento</legend>

        <div class="col-md-6">
          <input type="hidden" name="payment-method" data-input="fundingInstrument[method]" value="CREDIT_CARD"/>
          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="card-number">Parcelas</label>
            <div class="col-md-4">
            <input id="card-number" name="card-number" type="text" placeholder="" class="form-control input-md" data-input="installmentCount">

            </div>
          </div>

          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="card-number">Cartão</label>
            <div class="col-md-4">
            <input id="card-number" name="card-number" type="text" placeholder="" class="form-control input-md" data-encrypted-input="fundingInstrument[creditCard][number]">

            </div>
          </div>

          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="cvv-number">Cvv</label>
            <div class="col-md-4">
            <input id="cvv-number" name="cvv-number" type="text" placeholder="" class="form-control input-md" data-encrypted-input="fundingInstrument[creditCard][cvc]">

            </div>
          </div>

          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="expiration-date-month">Expiração/Mês</label>
            <div class="col-md-4">
            <input id="expiration-date-month" name="expiration-date-month" type="text" placeholder="" class="form-control input-md" data-input="fundingInstrument[creditCard][expirationMonth]">

            </div>
          </div>

          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="expiration-date-year">Expiração/Ano</label>
            <div class="col-md-4">
            <input id="expiration-date-year" name="expiration-date-year" type="text" placeholder="" class="form-control input-md" data-input="fundingInstrument[creditCard][expirationYear]">

            </div>
          </div>
        </div>

        <div class="col-md-6">
          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="holder-full-name">Nome</label>
            <div class="col-md-4">
            <input id="holder-full-name" name="holder-full-name" type="text" placeholder="" class="form-control input-md" data-input="fundingInstrument[creditCard][holder][fullname]">

            </div>
          </div>

          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="holder-birthdate">Data de Nascimento</label>
            <div class="col-md-4">
            <input id="holder-birthdate" name="holder-birthdate" type="text" placeholder="" class="form-control input-md" data-input="fundingInstrument[creditCard][holder][birthdate]">

            </div>
          </div>

          <input type="hidden" name="tax-document-type" data-input="fundingInstrument[creditCard][holder][taxDocument][type]" value="CPF"/>
          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="tax-document-number">CPF</label>
            <div class="col-md-4">
            <input id="tax-document-number" name="tax-document-number" type="text" placeholder="" class="form-control input-md" data-input="fundingInstrument[creditCard][holder][taxDocument][number]">

            </div>
          </div>

          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="phone-coutry-code">Código de País</label>
            <div class="col-md-4">
            <input id="phone-coutry-code" name="phone-coutry-code" type="text" placeholder="" class="form-control input-md" data-input="fundingInstrument[creditCard][holder][phone][countryCode]">

            </div>
          </div>

          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="phone-area-code">Código de Área</label>
            <div class="col-md-4">
            <input id="phone-area-code" name="phone-area-code" type="text" placeholder="" class="form-control input-md" data-input="fundingInstrument[creditCard][holder][phone][areaCode]">

            </div>
          </div>

          <!-- Text input-->
          <div class="form-group">
            <label class="col-md-4 control-label" for="phone-number">Número de telefone</label>
            <div class="col-md-4">
            <input id="phone-number" name="phone-number" type="text" placeholder="" class="form-control input-md" data-input="fundingInstrument[creditCard][holder][phone][number]">

            </div>
          </div>


        </div>

        <!-- Button -->
        <div class="form-group">
          <label class="col-md-5 control-label" for="submit-button"></label>
          <div class="col-md-5">
            <button id="submit-button" name="submit-button" class="btn btn-primary">Enviar</button>
          </div>
        </div>

      </fieldset>
    </form>

    <div id="payment-created" class="col-md-10 col-md-offset-1" style="display: none">
      <h3>Resultado</h3>
      <pre id="payment-created-content" class="prettyprint">
      </pre>
    </div>

    <script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
    <script type="text/javascript" src="../lib/jquery-2.1.0.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../lib/jsencrypt.min.js"></script>
    <script type="text/javascript" src="../dist/homolog/moip.js"></script>
    <script type="text/javascript">

      var moip;
      function setupMoip() {

        console.log($('#order-id').val());

        moip.publicKey = $('#public-key').html();
        moip.onSubmit($('#order-id').val(), 'test-form', function (data) {
          $('#payment-created').hide();
          $('#payment-created-content').text(data);
          $('#payment-created').show();
        });
      }

      window.addEventListener('load', function () {
        var publicKey = $('#public-key').html();
        moip = Moip.create({ publicKey: publicKey });

        $('#payment-created-content').each(function(i, e) { hljs.highlightBlock(e) });

        $('#submit-button').click(function (e) {
          setupMoip();
        });

      }, false);
    </script>
  </body>
</html>
